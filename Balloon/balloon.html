<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="text/javascript" src="./../util/popup.js"></script>
  <script type="text/javascript" src="./../util/audio.js"></script>
  <link rel="stylesheet" href="./../util/default.css" type="text/css">
  <link rel="stylesheet" href="./../util/popup.css" type="text/css">
  <title>Percent Balloon</title>
  <style>
    body {
      background-image: url("img/sky.jpg");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      height: 100vh;
    }

    .grid-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, 1fr);
      gap: 5px;
    }

    .website-box {
      position: relative;
      border: 1px solid #ccc;
      padding: 10px;
      height: 30vh;
      text-align: center;
      background-color: rgba(58, 94, 231, 0.8);
    }

    .website-box2 {
      position: relative;
      padding: 10px;
      height: 20vh;
      text-align: center;
    }

    button {
      margin-top: 10px;
    }

    .website-group {
      position: absolute;
      top: 1px;
      left: 5px;
      width: 10vw;
      height: 10vh;
      background-color: #333;
      color: #fff;
      margin: 3px;
      padding: 10px;
      border-radius: 5px;
    }


    .health-bar-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
    }

    .health-bar {
      width: 30vw;
      height: 30px;
      background-color: #ddd;
      margin-top: 10px;
      position: absolute;
      top: 15vh;
      left: 0.5vw;
    }

    .current-health {
      height: 100%;
      background-color: #4CAF50;
      transition: width 0.5s;
    }

    .health-text {
      margin-top: 5vh;
    }

    .answer-text-input {
      width: 25vw;
      margin-top: 10px;
      position: absolute;
      top: 23vh;
      left: 2.5vw;
    }

    .correct-answer {
      top: 10px;
    }

    .action_button {
      width: 10vw;
      height: 5vh;
      border-radius: 15px;
      margin: calc(5px);
    }
    #muteBtn{width: calc(20vw + 10px);}

    #questionBtn {background: #3a5ee7;}
    #questionBtn:hover {background: #2a4ed7;}
    #answerBtn {background: #ffa500;}
    #answerBtn:hover {background: #ef9500;}
    #reflectBtn {background: #ff2f22;}
    #reflectBtn:hover {background: #ef1f12;}
    #resetBtn {background: #ff2f22;}
    #resetBtn:hover {background: #ef1f12;}
    #addBtn {background: #ffa500;}
    #addBtn:hover {background: #ef9500;}
    #muteBtn{background: #a9e54d;}
    #muteBtn:hover{background: #99d53d;}

  </style>
</head>

<body class="default_text">

  <div class="grid-container">
    <div class="website-box">
      <button class="website-group default_text small_text" onclick="">Group A</button>
      <div class="health-text large_text shadow" id="health-text-1">100</div>
      <div class="health-bar">
        <div class="current-health" id="health-bar-1"></div>
      </div>
      <input type="number" class="answer-text-input default_text small_text" id="answerInput1" placeholder="ÂõûÁ≠î" min="0" step="1" max="100">
    </div>

    <div class="website-box">
      <button class="website-group default_text small_text" onclick="">Group B</button>
      <div class="health-text large_text shadow" id="health-text-2">100</div>
      <div class="health-bar">
        <div class="current-health" id="health-bar-2"></div>
      </div>
      <input type="number" class="answer-text-input default_text small_text" id="answerInput2" placeholder="ÂõûÁ≠î" min="0" step="1" max="100">
    </div>

    <div class="website-box">
      <button class="website-group default_text small_text" onclick="">Group C</button>
      <div class="health-text large_text shadow" id="health-text-3">100</div>
      <div class="health-bar">
        <div class="current-health" id="health-bar-3"></div>
      </div>
      <input type="number" class="answer-text-input default_text small_text" id="answerInput3" placeholder="ÂõûÁ≠î" min="0" step="1" max="100">
    </div>

    <div class="website-box">
      <button class="website-group default_text small_text" onclick="">Group D</button>
      <div class="health-text large_text shadow" id="health-text-4">100</div>
      <div class="health-bar">
        <div class="current-health" id="health-bar-4"></div>
      </div>
      <input type="number" class="answer-text-input default_text small_text" id="answerInput4" placeholder="ÂõûÁ≠î" min="0" step="1" max="100">
    </div>

    <div class="website-box">
      <button class="website-group default_text small_text" onclick="">Group E</button>
      <div class="health-text large_text shadow" id="health-text-5">100</div>
      <div class="health-bar">
        <div class="current-health" id="health-bar-5"></div>
      </div>
      <input type="number" class="answer-text-input default_text small_text" id="answerInput5" placeholder="ÂõûÁ≠î" min="0" step="1" max="100">
    </div>

    <div class="website-box">
      <button class="website-group default_text small_text" onclick="">Group F</button>
      <div class="health-text large_text shadow" id="health-text-6">100</div>
      <div class="health-bar">
        <div class="current-health" id="health-bar-6"></div>
      </div>
      <input type="number" class="answer-text-input default_text small_text" id="answerInput6" placeholder="ÂõûÁ≠î" min="0" step="1" max="100">
    </div>

  </div>

  <div class="website-box2">
    <button id="questionText" class="action_button default_text small_text" onclick="nextQuestion()">1ÂïèÁõÆ</button>
    <button id="questionBtn" class="action_button default_text small_text" onclick="showQuestion()">Âá∫È°å</button>
    <button id="answerBtn" class="action_button default_text small_text"
      onclick="showAlert('**Á¢∫Ë™ç**','Á≠î„Åà„ÇíË°®Á§∫„Åó„Å¶„Çà„Çç„Åó„ÅÑ„Åß„Åô„Åã?','confirm','showAnswer()')">Á≠î„Åà</button>
    <button id="reflectBtn" class="action_button default_text small_text"
      onclick="showAlert('**Á¢∫Ë™ç**','ÁµêÊûú„ÇíÂèçÊò†„Åó„Å¶„Çà„Çç„Åó„ÅÑ„Åß„Åô„Åã?','confirm','decreaseHealth()')">ÂèçÊò†</button>
    <br>
    <div class="large_text shadow" id="correctAnswer">Ê≠£Ëß£Ôºö??%</div>
    <br>
    <button id="addBtn" class="action_button default_text small_text" onclick="addHealth()">‰∏ÄÂæã</button>
    <button id="resetBtn" class="action_button default_text small_text"
      onclick="showAlert('**Á¢∫Ë™ç**','ÂàùÊúüÂåñ„Åó„Å¶„Çà„Çç„Åó„ÅÑ„Åß„Åô„Åã?','confirm','resetHealth()')">ÂàùÊúüÂåñ</button>
    <button class="action_button default_text small_text" onclick ="mute(this)" id="muteBtn" value="muted" >üîá„Éü„É•„Éº„Éà‰∏≠</button>
  </div>
  <br><br><br><br><br>
  <div class="website-box2">
    <input type="password" class="correct-answer" id="correctAnswerInput" placeholder="Ê≠£Ëß£" min="0" step="1"
      max="100"><br><br>
  </div>


  <script>
    var muting = true;
    function mute(obj){
      if(obj.value=="muted"){
        muting = false;
        obj.innerHTML="üéµ„ÄÄÈÄöÁü•‰∏≠„ÄÄ"
        obj.value="ok";
      }else{
        muting = true;
        obj.innerHTML = "üîá„Éü„É•„Éº„Éà‰∏≠";
        obj.value= "muted";
      }
    }

    let questionNumber = 1;
    let QAdict = {
      "18Ê≠≥~26Ê≠≥„ÄÅ„ÄåÂÖÖÂÆü„Åï„Åõ„Åü„ÅÑ„ÅÆ„ÅØ‰ªï‰∫ã„Çà„Çä„Éó„É©„Ç§„Éô„Éº„Éà!„Äç„ÄÅ‰Ωï%?":68,
      "10~30‰ª£„ÄÇÁõ¥Ëøë1„ÉµÊúà‰ª•ÂÜÖ„Å´„Çπ„Éû„Éõ„Ç≤„Éº„É†„Åß„ÅäÈáë„Çí‰Ωø„Å£„Åü‰∫∫„ÄÅ‰Ωï%?":28,
      "Â∞è‰∏≠Â≠¶Áîü„ÄÇË¶™„Å®Âêå„Åò‰ªï‰∫ã„Çí„Åó„Åü„ÅÑ‰∫∫„ÅØ‰Ωï%?":35,
      "‰ºöÁ§æ„Çí„Ç∫„É´‰ºë„Åø„Åó„Åü„Åì„Å®„Åå„ÅÇ„Çã‰∫∫„ÅØ‰Ωï%?":38,
      "Êó•Êú¨„ÅÆÂπ¥Ê¨°ÊúâÁµ¶‰ºëÊöáÂèñÂæóÁéá„ÅØ‰Ωï%?(2022)":62,
      "-----------------------------------":50,
      "Êó•Êú¨„ÅßËêΩ„Å®„Åó„ÅüË≤°Â∏É„ÅåÊàª„Å£„Å¶„Åè„ÇãÁ¢∫Áéá„ÄÅ‰Ωï%?":63,
      "„Äå„ÅäÂÆ¢Êßò„ÅÆ‰∏≠„Å´„ÅäÂåªËÄÖÊßò„ÅØ„ÅÑ„Åæ„Åõ„Çì„Åã!?„Äç‚áí„ÅÑ„ÇãÁ¢∫Áéá„ÄÅ‰Ωï%?":70,
      "Ëá™Ë≤©Ê©ü„ÅÆ‰∏ã„Å´„ÅäÈáë„ÅåËêΩ„Å°„Å¶„ÅÑ„ÇãÁ¢∫Áéá„ÄÅ‰Ωï%?":10,
      "„Åä„Åø„Åè„Åò„Åß„ÄåÂ§ßÂá∂„Äç„ÇíÂºï„ÅèÁ¢∫Áéá„ÄÅ‰Ωï%?":0,
      "Â§ßÂ≠¶Áîü„ÄÇ„Ç¢„É´„Éê„Ç§„Éà„Çí„Åó„Åü„Åì„Å®„Åå„Å™„ÅÑ‰∫∫„ÅØ‰Ωï%?(2022)":4,
      "Êó•Êú¨„ÅÆ18Ê≠≥„ÄÅÁîüÊàêAI„Çí‰Ωø„Å£„Åü„Åì„Å®„Åå„ÅÇ„Çã‰∫∫„ÅØ‰Ωï%?(2023/08)":36,
      "20~30‰ª£„ÄÇÂÖ•Êµ¥ÊôÇ„Å´„Çπ„Éû„Éõ„ÇÑÊê∫Â∏ØÈõªË©±„Çí‰ΩøÁî®„Åó„Å¶„ÅÑ„Çã‰∫∫„ÅØ‰Ωï%?":13,
      "ÂÖ±ÂÉç„ÅçÂ§´Â©¶„ÄÇ„Åä‰∫í„ÅÑ„ÅÆÂèéÂÖ•„ÇíÁü•„Çâ„Å™„ÅÑ‰∫∫„ÅØ‰Ωï%?":12,
      "„Çπ„Éû„Éõ„Çí„Éï„Ç£„É´„É†„ÇÑ„Ç±„Éº„Çπ„Åß‰øùË≠∑„Åó„Å¶„ÅÑ„Çã‰∫∫„ÄÅ‰Ωï%?":88,
      "Êó•Êú¨„ÅÆÁ±≥„ÅÆÂèéÁ©´Èáè„ÄÅÊñ∞ÊΩü„ÅØ‰Ωï%?":8,
      "„Åø„ÅùÊ±Å„ÅÆ‰∏ÄÁï™Â•Ω„Åç„Å™ÂÖ∑Êùê„ÅØ„ÄéË±ÜËÖê„Äè„ÄÅ‰Ωï%?":11,
      "2022Âπ¥„ÅÆÂõΩÂÜÖÂêë„ÅëÊñ∞ËªäË≤©Â£≤Âè∞Êï∞„ÄÅ„Éà„É®„ÇøËªä„ÅÆ„Ç∑„Çß„Ç¢„ÅØ‰Ωï%?":47,
      "Êó•Êú¨ÂõΩÂÜÖ„ÅÆiPhone„Ç∑„Çß„Ç¢„ÄÅ‰Ωï%?(2023/08)":69,
      "":0
    }

    function nextQuestion() {
      questionNumber++;
      updateQuestionText();
    }

    function updateQuestionText() {
      const questionTextElement = document.getElementById('questionText');
      questionTextElement.textContent = questionNumber + 'ÂïèÁõÆ';
    }

    function showQuestion() {
      if (muting == false){
        var audioFile = "img/question.mp3";
        var audio = new Audio(audioFile);
        audio.play()
      }
      const questionTextElement = document.getElementById('questionText');
      showAlert(questionTextElement.textContent, Object.keys(QAdict)[questionNumber - 1]);
    }

    function showAnswer() {
      if (muting == false){
        var audioFile = "img/drumroll1.mp3";
        var audio = new Audio(audioFile);
        audio.play()
      }
      animateNumber();
    }

    const numHealthBars = 6;
    let currentHealth = Array.from({ length: numHealthBars }, () => 100);

    function resetHealth() {
      currentHealth = Array.from({ length: numHealthBars }, () => 100);
      updateHealthBars();
      questionNumber = 1;
      updateQuestionText()
      for (let barNumber = 1; barNumber <= numHealthBars; barNumber++) {
        const inputAnswerInput = document.getElementById(`answerInput${barNumber}`);
        inputAnswerInput.value = "";
      }
    }
    function addHealth() {
      for (let barNumber = 1; barNumber <= numHealthBars; barNumber++) {
        currentHealth[barNumber - 1] = currentHealth[barNumber - 1] + 50;
      }
      updateHealthBars();
    }

    function decreaseHealth() {
      for (let barNumber = 1; barNumber <= numHealthBars; barNumber++) {
        const inputAnswerInput = document.getElementById(`answerInput${barNumber}`);
        const correctAnswer = document.getElementById('correctAnswerInput').value;
        if (inputAnswerInput.value == ''){
          continue;
        }
        const inputAnswer = parseInt(inputAnswerInput.value);
        if (inputAnswer == correctAnswer) {
          if (muting == false){
            var audioFile = "img/fanfare.mp3";
            var audio = new Audio(audioFile);
            audio.play()
          }
        }
        const decreaseAmount = Math.abs(inputAnswer - correctAnswer);
        const newHealth = Math.max(-50, currentHealth[barNumber - 1] - decreaseAmount);
        currentHealth[barNumber - 1] = newHealth;
        inputAnswerInput.value = "";
      }
      updateHealthBars();
    }

    function updateHealthBars() {
      for (let i = 1; i <= numHealthBars; i++) {
        const healthBar = document.getElementById(`health-bar-${i}`);
        const healthNumber = document.getElementById(`health-text-${i}`);
        healthBar.style.width = currentHealth[i - 1] + '%';
        healthNumber.textContent = currentHealth[i - 1];
        if (currentHealth[i - 1] <= 0) {
          healthNumber.style.color = "red";
        } else if (currentHealth[i - 1] <= 20) {
          healthNumber.style.color = "orange";
        } else {
          healthNumber.style.color = "black";
        }
      }
    }

    function set2fig(num) {
      if (num < 10) {
        return "0" + String(num);
      } else {
        return String(num);
      }
    }

    function animateNumber() {
      var inputNumber = document.getElementById('correctAnswerInput');
      if (Object.keys(QAdict).length >= questionNumber) {
        let firstQuestion = Object.keys(QAdict)[questionNumber - 1];
        inputNumber.value = QAdict[firstQuestion];
      }
      const resultDisplay = document.getElementById('correctAnswer');
      const targetNumber = parseInt(inputNumber.value, 10) || 0;
      const animationDuration = 4000; // 3 seconds
      const animationInterval = 50; // Update every 50 milliseconds
      const steps = animationDuration / animationInterval;

      let currentNumber = 0;
      let stepCount = 0;

      const animationIntervalId = setInterval(() => {
        currentNumber = Math.floor(Math.random() * 100); // Random number between 0 and 99
        resultDisplay.textContent = "Ê≠£Ëß£Ôºö" + set2fig(currentNumber) + "%";
        stepCount++;

        if (stepCount >= steps) {
          clearInterval(animationIntervalId);
          resultDisplay.textContent = "Ê≠£Ëß£Ôºö" + set2fig(targetNumber) + "%";
          if (muting == false){
            var audioFile = "img/drumroll2.mp3";
            var audio = new Audio(audioFile);
            audio.play()
          }
        }
      }, animationInterval);
    }

  </script>

</body>

</html>